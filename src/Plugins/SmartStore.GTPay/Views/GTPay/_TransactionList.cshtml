@using Telerik.Web.Mvc.UI;
@using SmartStore.Web.Framework;
@using SmartStore.Web.Framework.UI;
@using SmartStore.GTPay.Models;
@model ConfigurationModel

@*<script>
			function onEdit(e) {
			    //$(e.form).find('#Category').select2('val', e.dataItem['CategoryId']);
                alert("editing ...")
			}

			function onProductCategoryDataBound(e) {
				$('#Category').selectWrapper({ resetDataUrl: '@Url.Action("AllCategories", "Category")' });
			}
</script>*@

@using (Html.BeginForm("TransactionUpdate", "GTPay", FormMethod.Post, new { id = "manufacturer-form" }))
{
    <div>
        
        @(Html.Telerik().Grid<TransactionLog>(Model.TransactionLogsForGrid.Data)
        .Name("Grid")
        .DataKeys(keys => keys.Add(x => x.TransactionRefNo).RouteKey("TransactionRefNo"))
        .Columns(columns =>
        {
            columns.Command(commands =>
            {
                commands.Edit();
            }).Width(180);

            //columns.Bound(x => x.TransactionRefNo)
            //       .ClientTemplate("<a href=\"Edit/<#= Id #>\"><#= TransactionRefNo #></a>");
            columns.Bound(x => x.TransactionStatus);
            columns.Bound(x => x.TransactionRefNo);
            columns.Bound(x => x.TransactionDate).Format("{0:yyyy-MM-dd HH:mm:ss}");
            columns.Bound(x => x.ApprovedAmount).Format("{0:0,0.00}");
            columns.Bound(x => x.ResponseCode);
            columns.Bound(x => x.ResponseDescription);
            columns.Bound(x => x.MerchantReference);
            //columns.Bound(x => x.Gateway);
            columns.Bound(x => x.DatePaid).Format("{0:yyyy-MM-dd HH:mm:ss}");

        })
         .DataBinding(dataBinding =>
         {
             dataBinding.Ajax()
                 .Select("TransactionList", "GTPay", new RouteValueDictionary() { { "area", "SmartStore.GTPay" } })
                 .Update("UpdateTransactionLog", "GTPay", new RouteValueDictionary() { { "area", "SmartStore.GTPay" } });
         })
        .Editable(x =>
        {
            x.Mode(GridEditMode.InLine);
        })
        //.ToolBar(commands => commands.Edit())
        //.ClientEvents(events => {
        //    events.OnEdit("onEdit");
        //    //events.OnDataBound("onProductCategoryDataBound");
        //})

        .Pageable(settings => settings.PageSize(Model.GridPageSize).Position(GridPagerPosition.Both))
        .PreserveGridState()
        .EnableCustomBinding(true)
        )
    </div>
}
